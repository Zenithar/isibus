#summary Describe the protocol used to communicate between modules.
#labels Phase-Implementation

= Control Center =

Messages triggered by the ControlCenter :

|| Protocol || Params || Class || From || Description ||
|| `Bus_([0-9]+) Start` || instance_id || BusStartMsg || Bus || Sended by the bus process, give to all its instance number ||
|| `Bus id=([0-9]+) line=([0-9]+) pos=([0-9]+),([-]?[0-9]+) capacity=([0-9]+)` || int, int, int, int, int || BusPositionMsg || Bus || Send his position by giving the road id, and the distance on it. Positive distance means the bus is going away, and negative means it's coming back. And the capacity of the bus at the moment. ||
|| `Station_([0-9]+) Start` || instance_id || StationStartMsg || Station || Sended by the station process, give to all its instance number. ||

= Bus =

|| Protocol || Parameters || Callback Class || From || Description ||
|| `Bus_([0-9]+) id=([0-9]+) passengers=([0-9]+) line=([0-9]):(([0-9]+,[0-9]+;)*)` || instance_id,int,int,int,string || || CC || Initialise the bus process, with control center data. Send the internal bus id, its capacity, and the affected line. ||
|| `Station id=([0-9]+) bus_id=([0-9]+) len=([0-9]+)` || int, int, int || || Station || The station send his position, relative to the bus position on the common road portion. ||
 
= Station =
|| Protocol || Parameters || Callback Class || From || Description ||
|| `Station_([0-9]+) id=([0-9]+) road=([0-9]+) lines=([0-9]+(,[0-9]+)*) len=([0-9]+)` || instance_id, int, int, string, int || || CC || Synchronize the station process with the control center data. ||

= GUI =
|| Protocol || Parameters || Callback Class || From || Description ||


= Scenario =

We have 3 bus process, 3 stations, 3 lines.

|| Event || Bus || Station || CC || GUI ||
|| Station 1 Start || || `S1 >> Station_1234 Start` || `Station_1234 id=1 road=1 lines=1,2 len=100` || ||
|| Station 2 Start || || `S2 >> Station_4321 Start` ||`Station_4321 id=2 road=2 lines=1,2 len=100` || ||
|| Station 3 Start || || `S3 >> Station_5678 Start` || `Station_5678 id=3 road=3 lines=1 len=100` || ||
|| Station 4 Start || || `S4 >> Station_1357 Start` || `Station_1357 id=4 road=5 lines=2 len=100` || ||
|| Bus 1 Start || `B1 >> Bus_12134 Start` || || `Bus_12134 id=1 passenger=50 line=1:1,300;2,300;3,300;4,300;` || ||
|| || `B1 >> Bus id=1 line=1 pos=1,0 capacity=50` || `S1 >> Station id=1 bus_id=1 len=100` || || ||
|| Bus 2 Start || `B2 >> Bus_34521 Start` || || `Bus_34521 id=2 passenger=20 line=2:1,300;2,300;8,300:7,600;6,600;5,300;` || ||
|| || `B2 >> Bus id=2 line=2 pos=1,0 capacity=20` || `S1 >> Station id=1 bus_id=1 len=100` || || ||
|| Bus 3 Start || `B2 >> Bus_56789 Start` || || `Bus_56789 id=3 passenger=50 line=3:6,600;7,600;8,300;9,300;10,600;11,900;12,300;` || ||
|| || `B3 >> Bus id=3 line=3 pos=6,0 capacity=50` || || || ||